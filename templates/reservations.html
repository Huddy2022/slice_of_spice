{% extends "base.html" %}

{% block content %}
<!--Reservation page where a user can see any of their reservations-->
<div class="container bookings">
    <div class="row">
        <div class="col-sm-12">
            <h1 class="mb-4 booking-details">Booking Details</h1>
            <hr class="'mb-4">
            {% if customer.bookings.exists %}
            <table class="table table-striped">
                <thread>
                    <tr>
                        <td>Table Number:</td>
                        <td>Date:</td>
                        <td>Time:</td>
                    </tr>
                </thread>
                <tbody>
                    <!--Loops through the customer and booking models-->
                    {% for booking in customer.bookings.all %}
                    <tr>
                        <td scope="col">{{ booking.table }}</td>
                        <td scope="col">{{ booking.booking_date }}</td>
                        <td scope="col">{{ booking.booking_time }}</td>
                        <td scope="col">
                            {% if request.session.booking_canceled %}
                            Awaiting Approval
                            {% else %}
                            <a href="{% url 'cancel_booking' booking.id %}" id="cancel-booking-{{ booking.id }}"
                                class="btn btn-danger">Cancel Booking</a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="lead">You have no bookings yet!</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}